---
title: "Analysis - Pedro"
author: "Hopin Lee"
date: "26/02/2019"
output: html_document
---

```{r}

#read data
library(readr)
ped_data <- read_csv("ped_data.csv")

#load packages
library('dplyr')
library('tidyr')
library('gapminder')
library('ggplot2')
library ('ggalt')
library('forcats')
library('R.utils') 
library('png')
library('grid')
library('ggpubr')
library('scales') 
library('bbplot')

#Remove data >2018 
#assign data <2018 as pedro_data
pedro.data = subset(ped_data, year !="2018") 

#assign data with clinical trials only as pedro_data_rct
pedro.data.rct = subset(pedro.data, method !="systematic review")

#assign data with systematic reviews only as pedro_data_sr
pedro.data.sr = subset(pedro.data, method !="clinical trial")

# Note: Aidan - you could use the dplyr functions to do the above to keep the analysis tidy. No biggie though... 
```


# Trends over time
```{r}
tr <- pedro.data %>% group_by(year) %>% count(method)  # grouping the data by year, then counting the number of trials and reviews. Then assigning that dataframe to "tr". 

# Now you want to plot "n" by "year" 
tr.trend <- tr %>% ggplot(aes(year, n, colour=method, shape=method)) +
          geom_point(aes(colour = method)) +
          geom_smooth(aes(color = method)) +
          scale_x_continuous(name = "Year",
                             limits = c(1950,2020), 
                             breaks = seq(1950,2020,5)) +
          scale_y_continuous(name = "Count",
                             breaks = seq(0,150,25)) +
          scale_colour_discrete(name  ="Study type",
                                breaks=c("clinical trial", "systematic review"),
                                labels=c("Clinical Trials", "Systematic Reviews")) +
          scale_shape_discrete(name  ="Study type",
                               breaks=c("clinical trial", "systematic review"),
                               labels=c("Clinical Trials", "Systematic Reviews"))

tr.trend
```

